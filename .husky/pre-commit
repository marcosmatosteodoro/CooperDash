#!/bin/sh

echo "ðŸš€ Running pre-commit tests with Docker..."

# Start database only
docker-compose up -d db

# Run PHP tests (sem parallel)
echo "ðŸ§ª Testing PHP..."
docker-compose run -T --rm backend php artisan test --env=testing

# Run Node.js tests  
echo "ðŸ§ª Testing Node.js..."
docker-compose run -T --rm frontend npm test -- --passWithNoTests --watchAll=false

# Stop containers
docker-compose down

echo "âœ… All tests passed!"